<!DOCTYPE html>
<html>
<head>
    <title>ANTIPOST ‚Äî Admin Panel</title>
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>
    <div class="main-content">

    <!-- DASHBOARD -->
    <div id="tab-dashboard" class="tab-content active">
        <div class="card">
            <h2>Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Personal Works</div>
                    <div class="stat-number" id="stat-personal-count">‚Äî</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Commission Works</div>
                    <div class="stat-number" id="stat-cw-count">‚Äî</div>
                </div>
            </div>
        </div>
        <div class="card">
            <h2>Recent Activity</h2>
            <div style="display: flex; gap: 32px; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 260px;">
                    <h3>Personal</h3>
                    <ul class="recent-list" id="recent-personal-list">
                        <li style="font-size:12px; color:#ccc; padding:10px 0;">Loading...</li>
                    </ul>
                </div>
                <div style="flex: 1; min-width: 260px;">
                    <h3>Commission</h3>
                    <ul class="recent-list" id="recent-cw-list">
                        <li style="font-size:12px; color:#ccc; padding:10px 0;">Loading...</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- PERSONAL WORKS -->
    <div id="tab-personal" class="tab-content">
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 14px; margin-bottom: 22px;">
                <h2 style="border:none; padding:0; margin:0;">Personal Works</h2>
                <button class="delete" onclick="handleBulkDelete('personal')">Delete Selected</button>
            </div>
            <input type="hidden" id="personalId" />
            <input type="hidden" id="personalImageUrl" />
            <input type="hidden" id="personalPublicId" />
            <div class="upload-form">
                <input type="text" id="personalNameInput" placeholder="Title" />
                <input type="file" id="personalFileInput" accept="image/*" />
                <button id="personalUploadBtn" onclick="handlePersonalSubmit()">Upload</button>
                <button id="personalCancelBtn" class="cancel" style="display:none;" onclick="cancelPersonal()">Cancel</button>
            </div>
            <div class="progress" id="personalProgress">
                <div class="progress-bar" id="personalProgressBar"></div>
            </div>
            <p id="personalStatus"></p>
            <img id="personalPreview" class="preview-img" src="" alt="Preview">
        </div>
        <div class="card">
            <h2>Gallery</h2>
            <div id="personalGallery" class="gallery-grid">
                <p style="font-size:12px;color:#ccc;padding:20px;">Loading...</p>
            </div>
        </div>
    </div>

    <!-- COMMISSION WORKS -->
    <div id="tab-cw" class="tab-content">
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 14px; margin-bottom: 22px;">
                <h2 style="border:none; padding:0; margin:0;">Commission Works</h2>
                <button class="delete" onclick="handleBulkDelete('commission')">Delete Selected</button>
            </div>
            <input type="hidden" id="cwId" />
            <input type="hidden" id="cwImageUrl" />
            <input type="hidden" id="cwPublicId" />
            <div class="upload-form">
                <input type="text" id="cwTitleInput" placeholder="Title" />
                <input type="file" id="cwFileInput" accept="image/*" />
                <button id="cwUploadBtn" onclick="handleComissionSubmit()">Upload</button>
                <button id="cwCancelBtn" class="cancel" style="display:none;" onclick="cancelComission()">Cancel</button>
            </div>
            <div class="progress" id="cwProgress">
                <div class="progress-bar" id="cwProgressBar"></div>
            </div>
            <p id="cwStatus"></p>
            <img id="cwPreview" class="preview-img" src="" alt="Preview">
        </div>
        <div class="card">
            <h2>Gallery</h2>
            <div id="cwGallery" class="gallery-grid">
                <p style="font-size:12px;color:#ccc;padding:20px;">Loading...</p>
            </div>
        </div>
    </div>

    <!-- SETTINGS -->
    <div id="tab-settings" class="tab-content">
        <div class="card">
            <h2>Change Password</h2>
            <div style="max-width: 320px; display: flex; flex-direction: column; gap: 14px;">
                <input type="password" id="oldPassInput" placeholder="Current password" />
                <input type="password" id="newPassInput" placeholder="New password" />
                <button onclick="handleChangePassword()">Update</button>
            </div>
            <p id="settingsStatus"></p>
        </div>
        <div class="card">
            <h2>Change PIN</h2>
            <div style="max-width: 320px; display: flex; flex-direction: column; gap: 14px;">
                <input type="password" id="oldPinInput" placeholder="Current PIN" pattern="[0-9]*" inputmode="numeric" />
                <input type="password" id="newPinInput" placeholder="New PIN" pattern="[0-9]*" inputmode="numeric" />
                <button onclick="handleChangePin()">Update</button>
            </div>
            <p id="pinStatus"></p>
        </div>
        <div class="card">
            <h2>Watermark</h2>
            <div style="max-width: 320px; display: flex; flex-direction: column; gap: 14px;">
                <input type="text" id="wmTextInput" placeholder="e.g. ANTIPOST" />
                <button onclick="handleUpdateWm()">Update</button>
            </div>
            <p id="wmStatus"></p>
        </div>
        <div class="card">
            <h2>Session</h2>
            <button onclick="window.location.href='/logout'" class="delete" style="max-width:160px;">Logout</button>
        </div>
    </div>

    </div><!-- /.main-content -->

    <!-- LIVE PREVIEW MODAL -->
    <div id="live-preview-modal" class="live-preview-modal">
        <div class="live-preview-content">
            <div class="live-preview-header">
                <span class="live-preview-title">Live Preview</span>
                <button class="close-preview-btn" onclick="closeLivePreview()">‚úï Close</button>
            </div>
            <iframe id="live-preview-frame" src=""></iframe>
        </div>
    </div>

    <!-- FLOATING NAV -->
    <nav class="floating-nav">
        <button onclick="switchTab('dashboard')" id="btn-dashboard" class="nav-item active">
            <span class="nav-icon">üìä</span>
            <span class="nav-text">Board</span>
        </button>
        <button onclick="switchTab('personal')" id="btn-personal" class="nav-item">
            <span class="nav-icon">üìÇ</span>
            <span class="nav-text">Personal</span>
        </button>
        <button onclick="switchTab('cw')" id="btn-cw" class="nav-item">
            <span class="nav-icon">üíº</span>
            <span class="nav-text">Client</span>
        </button>
        <button onclick="switchTab('settings')" id="btn-settings" class="nav-item">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-text">Settings</span>
        </button>
        <button onclick="openLivePreview()" id="btn-live-preview" class="nav-item">
            <span class="nav-icon">üëÅÔ∏è</span>
            <span class="nav-text">Preview</span>
        </button>
    </nav>

    <script src="/js/admin-logic.js"></script>
</body>
</html>
