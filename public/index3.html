<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Portofolio Unified</title>
    <link rel="stylesheet" href="/css/dashboard.css">
</head>
<body>

    <!-- SIDEBAR -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>Antipost Dashboard</h2>
        </div>
        <button onclick="switchTab('dashboard')" id="btn-dashboard" class="active">ğŸ“Š Dashboard</button>
        <button onclick="switchTab('personal')" id="btn-personal">ğŸ“‚ Personal Works</button>
        <button onclick="switchTab('cw')" id="btn-cw">ğŸ’¼ Comission Works</button>
        <button onclick="switchTab('settings')" id="btn-settings">âš™ï¸ Settings</button>
        <button onclick="openLivePreview()" id="btn-live-preview">ğŸ‘ï¸ Live Preview</button>
        <button onclick="window.location.href='/logout'" style="margin-top: auto; border-top: 1px solid #34495e;">ğŸšª Logout</button>
    </div>

    <!-- MAIN CONTENT AREA -->
    <div class="main-content">

    <!-- ==================== DASHBOARD SECTION ==================== -->
    <div id="tab-dashboard" class="tab-content active">
        <div class="card">
            <h2>ğŸ“Š Dashboard Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Personal Works</div>
                    <div class="stat-number" id="stat-personal-count">...</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Comission Works</div>
                    <div class="stat-number" id="stat-cw-count">...</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>ğŸ•’ Recent Activity</h2>
            <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 300px;">
                    <h3>Newest Personal Works</h3>
                    <ul class="recent-list" id="recent-personal-list">
                        <li>Loading...</li>
                    </ul>
                </div>
                <div style="flex: 1; min-width: 300px;">
                    <h3>Newest Comission Works</h3>
                    <ul class="recent-list" id="recent-cw-list">
                        <li>Loading...</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== PERSONAL WORKS SECTION ==================== -->
    <div id="tab-personal" class="tab-content">
        <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
            <h2 style="border: none; padding: 0; margin: 0;">ğŸ“¤ PERSONAL WORKS</h2>
            <button class="delete" onclick="handleBulkDelete('personal')">ğŸ—‘ï¸ Delete Selected</button>
        </div>
        <div class="upload-form">
            <input type="hidden" id="personalId" />
            <input type="hidden" id="personalImageUrl" />
            <input type="hidden" id="personalPublicId" />
            <input type="text" id="personalNameInput" placeholder="TITLE (Personal)" />
            <input type="file" id="personalFileInput" accept="image/*" />
            <button id="personalUploadBtn" onclick="handlePersonalSubmit()">Upload</button>
            <button id="personalCancelBtn" class="cancel" style="display:none;" onclick="cancelPersonal()">Cancel</button>
        </div>
        <div class="progress" id="personalProgress">
            <div class="progress-bar" id="personalProgressBar"></div>
        </div>
        <p id="personalStatus"></p>
        <img id="personalPreview" class="preview-img" src="" alt="Preview">
    </div>

    <div class="card">
        <h2>Gallery â€” PERSONAL WORKS</h2>
        <div id="personalGallery" class="gallery-grid">
            <p>Memuat data...</p>
        </div>
        </div>
    </div>

    <!-- ==================== COMISSION WORKS SECTION ==================== -->
    <div id="tab-cw" class="tab-content">
        <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 20px;">
            <h2 style="border: none; padding: 0; margin: 0;">ğŸ“¤ COMISSION WORKS</h2>
            <button class="delete" onclick="handleBulkDelete('commission')">ğŸ—‘ï¸ Delete Selected</button>
        </div>
        <div class="upload-form">
            <input type="hidden" id="cwId" />
            <input type="hidden" id="cwImageUrl" />
            <input type="hidden" id="cwPublicId" />
            <input type="text" id="cwTitleInput" placeholder="TITLE (Comission)" />
            <input type="file" id="cwFileInput" accept="image/*" />
            <button id="cwUploadBtn" onclick="handleComissionSubmit()">Upload</button>
            <button id="cwCancelBtn" class="cancel" style="display:none;" onclick="cancelComission()">Cancel</button>
        </div>
        <div class="progress" id="cwProgress">
            <div class="progress-bar" id="cwProgressBar"></div>
        </div>
        <p id="cwStatus"></p>
        <img id="cwPreview" class="preview-img" src="" alt="Preview">
    </div>

    <div class="card">
        <h2>Gallery â€” COMISSION WORKS</h2>
        <div id="cwGallery" class="gallery-grid">
            <p>Memuat data...</p>
        </div>
        </div>
    </div>

    <!-- ==================== SETTINGS SECTION ==================== -->
    <div id="tab-settings" class="tab-content">
        <div class="card">
            <h2>ğŸ” Change Password</h2>
            <div style="max-width: 400px;">
                <input type="password" id="oldPassInput" placeholder="Password Lama" style="width: 100%; box-sizing: border-box; margin-bottom: 10px;" />
                <input type="password" id="newPassInput" placeholder="Password Baru" style="width: 100%; box-sizing: border-box; margin-bottom: 10px;" />
                <button onclick="handleChangePassword()">Update Password</button>
            </div>
            <p id="settingsStatus"></p>
        </div>
        <div class="card">
            <h2>ğŸ”¢ Change PIN</h2>
            <div style="max-width: 400px;">
                <input type="password" id="oldPinInput" placeholder="PIN Lama" style="width: 100%; box-sizing: border-box; margin-bottom: 10px;" pattern="[0-9]*" inputmode="numeric" />
                <input type="password" id="newPinInput" placeholder="PIN Baru" style="width: 100%; box-sizing: border-box; margin-bottom: 10px;" pattern="[0-9]*" inputmode="numeric" />
                <button onclick="handleChangePin()">Update PIN</button>
            </div>
            <p id="pinStatus"></p>
        </div>
        <div class="card">
            <h2>ğŸ’§ Watermark Settings</h2>
            <div style="max-width: 400px;">
                <input type="text" id="wmTextInput" placeholder="Watermark Text (e.g. ANTIPOST)" style="width: 100%; box-sizing: border-box; margin-bottom: 10px;" />
                <button onclick="handleUpdateWm()">Update Watermark</button>
            </div>
            <p id="wmStatus"></p>
        </div>
    </div>

    </div> <!-- End .main-content -->

    <!-- LIVE PREVIEW MODAL -->
    <div id="live-preview-modal" class="live-preview-modal">
        <div class="live-preview-content">
            <div class="live-preview-header">
                <span class="live-preview-title">WEBSITE LIVE PREVIEW</span>
                <button class="close-preview-btn" onclick="closeLivePreview()">âœ• TUTUP</button>
            </div>
            <iframe id="live-preview-frame" src=""></iframe>
        </div>
    </div>
    <script src="/js/admin-logic.js"></script>
</body>
</html>
